# ===============================================
# SKRIP ONE-SHOT PROJECT TALANRA (Langsung Jadi)
# ===============================================

# --- Variabel dan Setup ---
REPO_NAME="project-talanra-marketplace"
WA_NUMBER="6282211608688"
echo "ðŸš€ Memulai Project Talanra: Membuat direktori dan file..."
mkdir -p $REPO_NAME/{css,js}
cd $REPO_NAME
git init -b main > /dev/null 2>&1
touch logotalanra.jpg
echo "âœ… Direktori dan inisialisasi Git selesai."

# --- 1. Konten style.css ---
cat > css/style.css << EOF
body {
    font-family: sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #1e90ff, #ffd700); /* Biru Gradasi Kuning */
    color: #333;
}
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}
header {
    background-color: #fff;
    padding: 15px 0;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}
.logo {
    display: flex;
    align-items: center;
    padding-left: 20px;
}
.logo img {
    width: 40px;
    height: 40px;
    margin-right: 10px;
    border-radius: 50%;
}
.search-bar input[type="text"] {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 20px;
    width: 250px;
    margin-right: 20px;
}
.category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 15px;
    margin-top: 20px;
}
.category-card {
    background-color: #fff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: transform 0.2s;
    text-align: center;
    padding: 15px;
}
.category-card:hover {
    transform: translateY(-5px);
}
.category-card img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 10px;
}
.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Grid 2 Kolom */
    gap: 15px;
    margin-top: 20px;
}
.product-card {
    background-color: #fff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    text-align: left;
}
.product-card img {
    width: 100%;
    height: 180px; /* Card Bujur Siku */
    object-fit: cover;
}
.product-info {
    padding: 10px;
}
.product-info h4 {
    margin: 5px 0;
    font-size: 1em;
}
.product-info p {
    margin: 0;
    font-size: 0.9em;
    color: #f60;
    font-weight: bold;
}
.product-rating {
    color: gold;
    font-size: 0.8em;
    margin-top: 5px;
}
.whatsapp-btn {
    background-color: #25D366;
    color: white;
    padding: 8px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: bold;
    display: block;
    text-align: center;
    margin-top: 10px;
}
.back-btn {
    padding: 8px 15px;
    margin-bottom: 10px;
    background-color: #f44336;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
.add-product-btn {
    display: block;
    margin: 20px 0;
    padding: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    text-align: center;
}
EOF
echo "âœ… File style.css selesai."

# --- 2. Konten script.js ---
cat > js/script.js << EOF
const CATEGORIES = [
    { id: 'makanan', name: 'Makanan', img: 'https://via.placeholder.com/250x150/ff7f50/fff?text=Makanan+Lokal' },
    { id: 'transportasi', name: 'Transportasi', img: 'https://via.placeholder.com/250x150/1e90ff/fff?text=Sewa+Mobil%2FP' },
    { id: 'penginapan', name: 'Penginapan', img: 'https://via.placeholder.com/250x150/3cb371/fff?text=Homestay+Mewah' },
    { id: 'wisata', name: 'Wisata / Trip Lokal', img: 'https://via.placeholder.com/250x150/ffa07a/fff?text=Trip+Pulau' },
    { id: 'perahu', name: 'Sewa Perahu', img: 'https://via.placeholder.com/250x150/00ced1/fff?text=Perahu+Nelayan' },
    { id: 'jasa-desain', name: 'Jasa Desain / Foto', img: 'https://via.placeholder.com/250x150/9370db/fff?text=Desain+Grafis' },
    { id: 'outdoor', name: 'Peralatan Outdoor', img: 'https://via.placeholder.com/250x150/8b4513/fff?text=Tenda+Camping' },
    { id: 'oleh-oleh', name: 'Oleh-oleh', img: 'https://via.placeholder.com/250x150/f08080/fff?text=Kue+Khas+Daerah' },
    { id: 'jasa-harian', name: 'Jasa Harian', img: 'https://via.placeholder.com/250x150/20b2aa/fff?text=Antar+Jemput' },
    { id: 'jasa-tato', name: 'Jasa Tato', img: 'https://via.placeholder.com/250x150/000000/fff?text=Studio+Tato' },
];

const PROVIDERS = {
    'makanan': [
        { id: 'warung-a', name: 'Warung Nasi Uduk Bang Joko', img: 'https://via.placeholder.com/80x80/ff7f50/fff?text=WJ' },
        { id: 'resto-b', name: 'RM Padang Sederhana Uni Lili', img: 'https://via.placeholder.com/80x80/ff7f50/fff?text=RL' },
        { id: 'katering-c', name: 'Katering Sehat Ibu Nia', img: 'https://via.placeholder.com/80x80/ff7f50/fff?text=KN' },
        { id: 'bakso-d', name: 'Bakso Malang Cak Fikri', img: 'https://via.placeholder.com/80x80/ff7f50/fff?text=BF' },
        { id: 'kopi-e', name: 'Kedai Kopi Senja', img: 'https://via.placeholder.com/80x80/ff7f50/fff?text=KS' },
        { id: 'jajanan-f', name: 'Jajanan Pasar Mbak Rika', img: 'https://via.placeholder.com/80x80/ff7f50/fff?text=JR' },
    ],
    'transportasi': [
        { id: 'rental-a', name: 'Rental Mobil Pak Budi', img: 'https://via.placeholder.com/80x80/1e90ff/fff?text=RB' },
        { id: 'ojek-b', name: 'Ojek Online Lokal Bang Yadi', img: 'https://via.placeholder.com/80x80/1e90ff/fff?text=OY' },
        { id: 'sewa-c', name: 'Sewa Motor Harian', img: 'https://via.placeholder.com/80x80/1e90ff/fff?text=SM' },
        { id: 'bus-d', name: 'Travel Shuttle Talanra', img: 'https://via.placeholder.com/80x80/1e90ff/fff?text=TT' },
        { id: 'taksi-e', name: 'Taksi Konvensional Talanra', img: 'https://via.placeholder.com/80x80/1e90ff/fff?text=TK' },
        { id: 'mobil-f', name: 'Mobil Pribadi Nyewain', img: 'https://via.placeholder.com/80x80/1e90ff/fff?text=MP' },
    ],
    'penginapan': [
        { id: 'homestay-a', name: 'Homestay Tepi Pantai', img: 'https://via.placeholder.com/80x80/3cb371/fff?text=HT' },
        { id: 'villa-b', name: 'Villa Mewah di Bukit', img: 'https://via.placeholder.com/80x80/3cb371/fff?text=VB' },
        { id: 'hotel-c', name: 'Hotel Budget Ramah Keluarga', img: 'https://via.placeholder.com/80x80/3cb371/fff?text=HR' },
        { id: 'guesthouse-d', name: 'Guest House Nyaman', img: 'https://via.placeholder.com/80x80/3cb371/fff?text=GN' },
        { id: 'bungalow-e', name: 'Bungalow Tropis', img: 'https://via.placeholder.com/80x80/3cb371/fff?text=BT' },
        { id: 'kos-f', name: 'Kos Harian Murah', img: 'https://via.placeholder.com/80x80/3cb371/fff?text=KM' },
    ],
    // Sisanya kosong, akan menampilkan "Belum ada penyedia"
};

const PRODUCTS = {
    'warung-a': [
        { name: 'Nasi Goreng Ayam', price: '15.000', rating: 4.5, img: 'https://via.placeholder.com/300x180/ff8c00/fff?text=Nasi+Goreng' },
        { name: 'Mie Rebus Spesial', price: '12.000', rating: 4.2, img: 'https://via.placeholder.com/300x180/ff8c00/fff?text=Mie+Rebus' },
        { name: 'Sate Ayam Madura', price: '20.000', rating: 4.7, img: 'https://via.placeholder.com/300x180/ff8c00/fff?text=Sate+Ayam' },
        { name: 'Gado-Gado Komplit', price: '14.000', rating: 4.1, img: 'https://via.placeholder.com/300x180/ff8c00/fff?text=Gado-Gado' },
    ],
    'resto-b': [
        { name: 'Rendang Sapi', price: '25.000', rating: 4.8, img: 'https://via.placeholder.com/300x180/a52a2a/fff?text=Rendang' },
        { name: 'Ayam Pop', price: '18.000', rating: 4.6, img: 'https://via.placeholder.com/300x180/a52a2a/fff?text=Ayam+Pop' },
    ],
    'rental-a': [
        { name: 'Sewa Avanza Harian', price: '300.000', rating: 4.3, img: 'https://via.placeholder.com/300x180/4169e1/fff?text=Avanza' },
        { name: 'Sewa Motor Matic', price: '75.000', rating: 4.1, img: 'https://via.placeholder.com/300x180/4169e1/fff?text=Motor+Matic' },
        { name: 'Sewa Sepeda Gunung', price: '40.000', rating: 3.9, img: 'https://via.placeholder.com/300x180/4169e1/fff?text=Sepeda' },
    ],
    'homestay-a': [
        { name: 'Kamar Single View Pantai', price: '250.000', rating: 4.7, img: 'https://via.placeholder.com/300x180/2e8b57/fff?text=Kamar+Pantai' },
        { name: 'Kamar Keluarga', price: '450.000', rating: 4.4, img: 'https://via.placeholder.com/300x180/2e8b57/fff?text=Kamar+Keluarga' },
    ],
    // Tambahkan dummy data lainnya di sini jika mau
};

const whatsappNumber = '${WA_NUMBER}';

const mainContent = document.getElementById('main-content');
const breadcrumb = document.getElementById('breadcrumb');
let currentCategory = null;

function createRating(score) {
    const fullStar = 'â­';
    const emptyStar = 'â˜†';
    let stars = '';
    const roundedScore = Math.round(score * 2) / 2;
    for (let i = 0; i < 5; i++) {
        if (i < Math.floor(roundedScore)) {
            stars += fullStar;
        } else if (i === Math.floor(roundedScore) && roundedScore % 1 !== 0) {
            stars += 'ðŸŒŸ';
        } else {
            stars += emptyStar;
        }
    }
    return \`<div class="product-rating">\${stars} (\${score.toFixed(1)})</div>\`;
}

function renderCategories() {
    breadcrumb.innerHTML = '<a href="#" onclick="renderCategories()">Home</a>';
    mainContent.innerHTML = '<h2>Pilih Kategori Layanan Project Talanra</h2><button class="add-product-btn" onclick="alert(\'Fungsi admin mini: Tampilan form tambah produk akan muncul di implementasi nyata.\')">Mode "Tambah Produk" (Admin Mini)</button><div class="category-grid"></div>';
    const grid = mainContent.querySelector('.category-grid');

    CATEGORIES.forEach(cat => {
        const card = document.createElement('div');
        card.className = 'category-card';
        card.innerHTML = \`<img src="\${cat.img}" alt="\${cat.name}"><h3>\${cat.name}</h3>\`;
        card.onclick = () => renderProviders(cat.id, cat.name);
        grid.appendChild(card);
    });
}

window.renderProviders = function(categoryId, categoryName) {
    currentCategory = categoryId;
    breadcrumb.innerHTML = \`<a href="#" onclick="renderCategories()">Home</a> > \${categoryName}\`;
    const providers = PROVIDERS[categoryId] || [];

    let html = \`<button class="back-btn" onclick="renderCategories()">Kembali ke Kategori</button><h2>Penyedia \${categoryName}</h2><div class="product-grid"></div>\`;
    mainContent.innerHTML = html;
    const grid = mainContent.querySelector('.product-grid');

    if (providers.length === 0) {
        grid.innerHTML = '<p>Belum ada penyedia di kategori ini.</p>';
        return;
    }

    providers.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        // Card Penyedia (Bujur Siku)
        card.innerHTML = \`
            <img src="\${p.img}" alt="\${p.name}">
            <div class="product-info">
                <h4>\${p.name}</h4>
                <a href="#" class="whatsapp-btn">Lihat Produk / Kontak</a>
            </div>
        \`;
        card.onclick = () => renderProducts(p.id, p.name, categoryName);
        grid.appendChild(card);
    });
}

window.renderProducts = function(providerId, providerName, categoryName) {
    breadcrumb.innerHTML = \`<a href="#" onclick="renderCategories()">Home</a> > <a href="#" onclick="renderProviders('\${currentCategory}', '\${categoryName}')">\${categoryName}</a> > \${providerName}\`;
    const products = PRODUCTS[providerId] || [];

    let html = \`<button class="back-btn" onclick="renderProviders('\${currentCategory}', '\${categoryName}')">Kembali ke Penyedia</button><h2>Produk dari \${providerName}</h2><div class="product-grid"></div>\`;
    mainContent.innerHTML = html;
    const grid = mainContent.querySelector('.product-grid');

    if (products.length === 0) {
        grid.innerHTML = '<p>Belum ada produk dari penyedia ini.</p>';
        return;
    }

    products.forEach(prod => {
        const card = document.createElement('div');
        card.className = 'product-card';
        // Card Produk (Bujur Siku - Tokped/Shopee style)
        card.innerHTML = \`
            <img src="\${prod.img}" alt="\${prod.name}">
            <div class="product-info">
                <h4>\${prod.name}</h4>
                <p>Harga: Rp\${prod.price}</p>
                \${createRating(prod.rating)}
                <a href="https://wa.me/\${whatsappNumber}?text=Halo%2C%20saya%20tertarik%20dengan%20\${prod.name}%20di%20Talanra." target="_blank" class="whatsapp-btn">Hubungi via WhatsApp</a>
            </div>
        \`;
        grid.appendChild(card);
    });
}

document.addEventListener('DOMContentLoaded', renderCategories);
EOF
echo "âœ… File script.js selesai."

# --- 3. Konten index.html ---
cat > index.html << EOF
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Talanra - Marketplace Lokal</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="logotalanra.jpg" alt="Logo Project Talanra">
            <h1>Project Talanra</h1>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Cari layanan, produk, atau penjual...">
        </div>
    </header>

    <div class="container">
        <div id="breadcrumb"></div>
        <main id="main-content">
            </main>
    </div>

    <script src="js/script.js"></script>
</body>
</html>
EOF
echo "âœ… File index.html selesai."

# --- 4. Finalisasi dan Instruksi ---
echo "--------------------------------------------------------"
echo "ðŸŽ‰ PROJECT TALANRA SUDAH SIAP!"
echo "Folder repositori: $REPO_NAME"
echo ""
echo "LANGKAH BERIKUTNYA:"
echo "1. Pindah ke direktori: cd $REPO_NAME"
echo "2. Buka di browser: open index.html (di macOS/Linux) atau start index.html (di Windows CMD)"
echo "3. Untuk upload ke GitHub: git add . && git commit -m \"Talanra: Final Code Drop\""
echo "--------------------------------------------------------"
  
